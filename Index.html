<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Red de Acción Masiva | Preinscripción</title>

    <!-- Fuentes e íconos -->
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

    <style>
        :root{
            --primary:#2563eb;
            --primary-dark:#1d4ed8;
            --accent:#22c55e;
            --bg:#f1f5f9;
            --surface:#ffffff;
            --text:#0f172a;
            --text-light:#64748b;
            --error:#e11d48;
            --radius:18px;
        }
        *{box-sizing:border-box;margin:0;padding:0;}
        html,body{height:100%;scroll-behavior:smooth;}
        body{
            font-family:'Inter', Arial, sans-serif;
            color:var(--text);
            background:var(--bg);
            display:flex;
            flex-direction:column;
        }

        /* NAVBAR */
        .navbar{
            position:sticky; top:0; z-index:50;
            width:100%;
            background:var(--surface);
            box-shadow:0 2px 16px rgba(0,0,0,.05);
            padding:.9rem 1.5rem;
            display:flex; justify-content:space-between; align-items:center;
        }
        .brand{
            font-family:'Montserrat', sans-serif;
            font-size:1.45rem;
            font-weight:700;
            color:var(--primary);
            display:flex; align-items:center; gap:.55rem;
            text-decoration:none;
        }
        .brand::before{
            content:"";
            width:22px;height:22px;border-radius:50%;
            background:linear-gradient(135deg,var(--primary),var(--accent));
            display:inline-block;
        }

        /* HERO */
        .hero{
            width:100%;
            background:linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 60%, #0ea5e9 120%);
            color:#fff;
            padding:3.8rem 1.2rem 4.5rem 1.2rem;
            text-align:center;
        }
        .hero h1{
            font-family:'Montserrat', sans-serif;
            font-size:2.2rem;
            font-weight:700;
            margin-bottom:.6rem;
        }
        .hero p{
            font-size:1rem;
            opacity:.9;
            max-width:680px;
            margin:0 auto;
        }

        /* CONTENEDOR DEL FORM */
        .wrapper{
            flex:1;
            display:flex;
            justify-content:center;
            padding:0 1rem;
            transform:translateY(-60px);
            margin-bottom:-60px; /* compensa el translate */
        }
        .card{
            width:100%;
            max-width:480px;
            background:var(--surface);
            border-radius:var(--radius);
            box-shadow:0 12px 34px rgba(37,99,235,.15);
            padding:2.2rem 1.8rem 2.4rem 1.8rem;
        }
        .card h2{
            font-family:'Montserrat', sans-serif;
            color:var(--primary);
            font-size:1.6rem;
            margin-bottom:1.4rem;
            text-align:center;
        }

        label{
            font-size:.97rem;
            font-weight:500;
            color:var(--text);
            margin-bottom:3px;
            display:block;
        }
        input[type="text"],
        input[type="tel"],
        select{
            width:100%;
            padding:11px 12px;
            border:1px solid #cbd5e1;
            border-radius:10px;
            font-size:.98rem;
            background:#f8fafc;
            transition:border .2s, box-shadow .2s;
            margin-bottom:17px;
            outline:none;
        }
        input:focus,select:focus{
            border-color:var(--primary-light);
            box-shadow:0 0 0 3px rgba(37,99,235,.15);
            background:#fff;
        }

        button[type="submit"]{
            width:100%;
            padding:13px 0;
            border:none;
            border-radius:12px;
            background:linear-gradient(90deg,var(--primary) 10%, var(--accent) 140%);
            color:#fff;
            font-size:1.05rem;
            font-weight:700;
            cursor:pointer;
            box-shadow:0 4px 16px rgba(34,197,94,.25);
            transition:transform .12s, box-shadow .15s, opacity .15s;
        }
        button[type="submit"]:hover{
            box-shadow:0 6px 26px rgba(34,197,94,.35);
            transform:translateY(-1px);
        }
        button[type="submit"]:active{
            transform:scale(.97);
            box-shadow:0 3px 12px rgba(34,197,94,.25);
        }
        button[disabled]{opacity:.65; cursor:not-allowed;}

        #msgError{
            color:var(--error);
            margin-bottom:10px;
            font-size:.95rem;
            text-align:center;
            min-height:18px;
        }

        /* ÉXITO */
        #codigoGenerado{
            display:none;
            margin-top:1.6rem;
            text-align:center;
        }
        #codigoGenerado h3{
            color:var(--primary);
            margin-bottom:.5rem;
            font-size:1.35rem;
        }
        #codigo{
            font-size:2.1rem;
            font-weight:700;
            color:var(--accent);
            margin-top:.7rem;
            letter-spacing:1px;
        }
        .ok-icon{
            font-size:2.3rem;
            color:var(--accent);
            margin-bottom:.6rem;
        }

        footer{
            width:100%;
            background:var(--surface);
            color:var(--text-light);
            text-align:center;
            font-size:.9rem;
            padding:1rem 0 1.2rem 0;
            box-shadow:0 -1px 8px rgba(0,0,0,.03);
            margin-top:40px;
        }
        footer a{color:var(--primary); text-decoration:none;}
        @media (max-width:600px){
            .hero h1{font-size:1.8rem;}
            .card{padding:1.6rem 1.1rem 2rem 1.1rem;}
        }
    </style>
</head>
<body>
    <!-- NAV -->
    <header class="navbar">
        <a class="brand" href="#">Red de Acción Masiva</a>
    </header>

    <!-- HERO -->
    <section class="hero">
        <h1>Preinscripción a la Red</h1>
        <p>Da el primer paso. Regístrate con tus datos y el código de tu patrocinador para reservar tu lugar.</p>
    </section>

    <!-- FORM -->
    <main class="wrapper">
        <div class="card" id="formCard">
            <h2>Formulario de Preinscripción</h2>
            <div id="msgError"></div>

            <form id="preForm" autocomplete="off">
                <label for="nombre">Nombre completo</label>
                <input type="text" id="nombre" name="nombre" required placeholder="Ej: Juan Pérez">

                <label for="telefono">Teléfono (WhatsApp)</label>
                <input type="tel" id="telefono" name="telefono" required pattern="[0-9]{7,15}" placeholder="Ej: 3121234567">

                <label for="patrocinador">Código de tu patrocinador</label>
                <input type="text" id="patrocinador" name="patrocinador" required placeholder="Ej: RM-1234">

                <label for="pais">País</label>
                <select id="pais" name="pais" required>
                    <option value="">Selecciona tu país</option>
                    <option>Argentina</option>
                    <option>Bolivia</option>
                    <option>Brasil</option>
                    <option>Chile</option>
                    <option>Colombia</option>
                    <option>Costa Rica</option>
                    <option>Ecuador</option>
                    <option>El Salvador</option>
                    <option>Estados Unidos</option>
                    <option>Guatemala</option>
                    <option>Honduras</option>
                    <option>México</option>
                    <option>Nicaragua</option>
                    <option>Panamá</option>
                    <option>Paraguay</option>
                    <option>Perú</option>
                    <option>Puerto Rico</option>
                    <option>República Dominicana</option>
                    <option>Uruguay</option>
                    <option>Venezuela</option>
                </select>

                <label for="paquete">¿Con qué paquete vas a hacer la inscripción?</label>
                <select id="paquete" name="paquete" required>
                    <option value="">Selecciona un paquete</option>
                    <option value="ESP 1|100">ESP 1 (100 puntos)</option>
                    <option value="ESP 2|250">ESP 2 (250 puntos)</option>
                    <option value="ESP 3|500">ESP 3 (500 puntos)</option>
                </select>

                <button type="submit" id="enviarBtn">Enviar Preinscripción</button>
            </form>

            <div id="codigoGenerado">
                <i class="fa-solid fa-circle-check ok-icon"></i>
                <h3>¡Preinscripción exitosa!</h3>
                <p>Tu código asignado es:</p>
                <div id="codigo"></div>
            </div>
        </div>
    </main>

    <footer>
        &copy; 2025 Red de Acción Masiva. Todos los derechos reservados.
    </footer>

    <script>
        let enviando = false;

        document.getElementById('preForm').addEventListener('submit', function(e){
            e.preventDefault();
            if (enviando) return;

            const nombre       = document.getElementById('nombre').value.trim();
            const telefono     = document.getElementById('telefono').value.trim();
            const patrocinador = document.getElementById('patrocinador').value.trim();
            const pais         = document.getElementById('pais').value;
            const paqueteRaw   = document.getElementById('paquete').value;

            const btn      = document.getElementById('enviarBtn');
            const msgError = document.getElementById('msgError');
            msgError.textContent = '';

            if(!nombre || !telefono || !patrocinador || !pais || !paqueteRaw){
                msgError.textContent = 'Por favor, completa todos los campos.';
                return;
            }

            const [paquete, puntos] = paqueteRaw.split('|');

            // bloquear doble envío
            enviando = true;
            btn.disabled = true;
            btn.innerText = 'Enviando...';

            // código único
            const codigoNuevo = 'RM-' + Math.floor(1000 + Math.random() * 9000);

            const data = {
                nombre,
                telefono,
                patrocinador,
                pais,
                paquete,
                puntos,
                codigoAsignado: codigoNuevo
            };

            fetch('https://script.google.com/macros/s/AKfycbzdhLfZxyzLJRsNaQHo4HAL0S5EqY3iyIEBA2LM2Y4__t6usmbw9jqvfQMScADjysk/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(data)
            }).then(() => {
                document.getElementById('preForm').style.display = 'none';
                document.getElementById('codigoGenerado').style.display = 'block';
                document.getElementById('codigo').textContent = codigoNuevo;
            }).catch(err => {
                console.error(err);
                msgError.textContent = 'Hubo un error enviando tu preinscripción, inténtalo más tarde.';
                btn.disabled = false;
                btn.innerText = 'Enviar Preinscripción';
                enviando = false;
            });
        });
    </script>
</body>
</html>





